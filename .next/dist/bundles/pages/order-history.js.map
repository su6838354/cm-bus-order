{"version":3,"file":"bundles/pages/order-history.js","sources":["webpack:///webpack/bootstrap 03f00dc2e23ae2b8d029","webpack:///pages/components/order-info.js","webpack:///pages/order-history.js","webpack:///pages/request.js","webpack:///external \"@babel/runtime/regenerator\"","webpack:///external \"axios\"","webpack:///external \"next-cookies\"","webpack:///external \"react\""],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 03f00dc2e23ae2b8d029","/**\n * Created by pdd on 2018/6/11.\n */\n\nimport './order-info.scss';\n\nexport default (props) => {\n\n    const {\n        order_date,\n        order_path,\n        order_station,\n        order_class,\n        order_ticket_count,\n        order_owner,\n        order_mobile\n    } = props;\n    return (\n        <div className=\"content\">\n            <div className=\"title\">预订信息</div>\n            <div>选择日期：{order_date}</div>\n            <div>选择线路：{order_path}</div>\n            <div>选择站点：{order_station}</div>\n            <div>选择班次：{order_class}</div>\n            <div>选择张数：{order_ticket_count}</div>\n            <div>预订人：{order_owner}</div>\n            <div>手机号：{order_mobile}</div>\n        </div>\n    )\n}\n\n\n// WEBPACK FOOTER //\n// pages/components/order-info.js","/**\n * Created by pdd on 2018/6/10.\n */\n\nimport React from 'react';\nimport './order-history.scss';\nimport OrderInfo from './components/order-info';\nimport cookies from 'next-cookies';\nimport request from './request';\n\n\nexport default class OrderHistory extends React.Component {\n\n    constructor (props) {\n        super(props);\n        this.state = {\n            list: []\n        }\n    }\n\n    static async getInitialProps (ctx) {\n        const { mobile, username } = cookies(ctx);\n        console.log('mobile:', mobile);\n        const { res } = ctx;\n        if (res) {\n            if (!mobile) {\n                res.writeHead(302, {\n                    Location: '/login'\n                })\n                res.end()\n                res.finished = true\n                return\n            }\n        } else {\n            if (!mobile) {\n                Router.push('/login');\n                return\n            }\n        }\n\n\n        return {\n            mobile, username\n        }\n    }\n\n    componentDidMount () {\n        window.document.title = '旅游巴士预订信息'\n        request.post('/cbo/list_by_mobile', {mobile: this.props.mobile}).then(response => {\n            console.log('--', response.data.data)\n            if (response.data.code === 0) {\n                this.setState({\n                    list: response.data.data\n                })\n            }\n        });\n    }\n\n\n    renderList = () => {\n        const { username, mobile } = this.props;\n        return this.state.list.map(item => {\n            return (\n                <div>\n                    <OrderInfo {...item} order_owner={username} order_mobile={mobile}  />\n                </div>\n            )\n        })\n    }\n\n\n    render () {\n        return (\n            <div className=\"order-history-page\">\n                {this.renderList()}\n            </div>\n        )\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// pages/order-history.js","import axios from 'axios'\n// import store from '@/store'\n// import { getToken } from '@/utils/auth'\n\n// 创建axios实例\nconst service = axios.create({\n  baseURL: 'http://172.16.18.37:3002', // api的base_url\n  timeout: 10000 // 请求超时时间\n})\n\n// request拦截器\nservice.interceptors.request.use(config => {\n  // Do something before request is sent\n  // if (store.getters.token) {\n  //   config.headers['X-Token'] = getToken() // 让每个请求携带token--['X-Token']为自定义key 请根据实际情况自行修改\n  // }\n  return config\n}, error => {\n  console.log(error) // for debug\n  message.error(error.message)\n  Promise.reject(error)\n})\n\n// respone拦截器\n// service.interceptors.response.use(\n//   ({ data, config, status }) => {\n//     if (config.method === 'delete' && status === 204) {\n//       return {data, code: 0, message: 'delete success'}\n//     } else if (data.code !== 0) {\n//       message.error(data.message)\n//       return Promise.reject(new Error(data))\n//     } else {\n//       return data\n//     }\n//   },\n//   /**\n//   * 下面的注释为通过response自定义code来标示请求状态，当code返回如下情况为权限有问题，登出并返回到登录页\n//   * 如通过xmlhttprequest 状态码标识 逻辑可写在下面error中\n//   */\n//   //  const res = response.data;\n//   //     if (res.code !== 20000) {\n//   //       Message({\n//   //         message: res.message,\n//   //         type: 'error',\n//   //         duration: 5 * 1000\n//   //       });\n//   //       // 50008:非法的token; 50012:其他客户端登录了;  50014:Token 过期了;\n//   //       if (res.code === 50008 || res.code === 50012 || res.code === 50014) {\n//   //         MessageBox.confirm('你已被登出，可以取消继续留在该页面，或者重新登录', '确定登出', {\n//   //           confirmButtonText: '重新登录',\n//   //           cancelButtonText: '取消',\n//   //           type: 'warning'\n//   //         }).then(() => {\n//   //           store.dispatch('FedLogOut').then(() => {\n//   //             location.reload();// 为了重新实例化vue-router对象 避免bug\n//   //           });\n//   //         })\n//   //       }\n//   //       return Promise.reject('error');\n//   //     } else {\n//   //       return response.data;\n//   //     }\n//   error => {\n//     console.log('err' + error)// for debug\n//     message.error(error.message)\n//     return Promise.reject(error)\n//   })\n\nexport default service\n\n\n\n// WEBPACK FOOTER //\n// pages/request.js","module.exports = require(\"@babel/runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"@babel/runtime/regenerator\"\n// module id = @babel/runtime/regenerator\n// module chunks = 3 4","module.exports = require(\"axios\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"axios\"\n// module id = axios\n// module chunks = 3 4","module.exports = require(\"next-cookies\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"next-cookies\"\n// module id = next-cookies\n// module chunks = 3 4","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = react\n// module chunks = 0 3 4"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;ACnEA;;;AAIA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7BA;;;AAIA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;;AAEA;AAAA;AACA;AADA;AACA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA;AA8CA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAvDA;AAEA;AACA;AADA;AAFA;AAKA;AACA;;;AA2BA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AADA;AAGA;AACA;AACA;;;AAeA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;;;;AAzDA;;;;;;;AACA;AACA;AACA;AACA;AAAA;;;;;AACA;;;;;AACA;AACA;AADA;AAGA;AACA;;;;;;;;AAIA;;;;;AACA;;;;AAMA;AACA;AAAA;AADA;AACA;;;;;;;;;;;;;;;;AA/BA;AACA;;;;;;;;;;;;;;;;ACZA;AAAA;AAAA;AAEA;AAEA;AACA;AAAA;AACA;AAAA;AACA;AACA;AAHA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACpEA;;;;;;;ACAA;;;;;;;ACAA;;;;;;;ACAA;;;;A","sourceRoot":""}